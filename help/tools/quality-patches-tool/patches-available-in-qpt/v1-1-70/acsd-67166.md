---
title: 'ACSD-67166: Dubbele uitvoering van de query "catalogvoorraad_stock_status" bij het laden van een aanhalingsteken in de winkel'
description: Pas het ACSD-67166 flard toe om de kwestie van Adobe Commerce te bevestigen waar de dubbele uitvoering van de vraag &grave; catalogvoorraad_stock_status &grave; voorkomt wanneer het laden van een citaat op de opslag, die overtollige vraag van DB veroorzaakt.
feature: Inventory
role: Admin, Developer
type: Troubleshooting
source-git-commit: ef596770b58528f9dddb4bd1650d7cbed0bf0b95
workflow-type: tm+mt
source-wordcount: '344'
ht-degree: 0%

---


# ACSD-67166: dubbele uitvoering van de `cataloginventory_stock_status` -query bij het laden van een aanhalingsteken in de winkel

De ACSD-67166-patch verhelpt het probleem waarbij dubbele uitvoering van de `cataloginventory_stock_status` -query plaatsvindt wanneer een aanhalingsteken in de winkel wordt geladen, wat leidt tot redundante DB-aanroepen. Deze patch is beschikbaar wanneer [[!DNL Quality Patches Tool (QPT)]](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) 1.1.70 wordt geïnstalleerd. De patch-id is ACSD-67166. Dit probleem wordt volgens de planning opgelost in Adobe Commerce 2.4.9.

## Betrokken producten en versies

**het flard wordt gecreeerd voor de versie van Adobe Commerce:**

* Adobe Commerce (alle implementatiemethoden) 2.4.5-p13

**Compatibel met de versies van Adobe Commerce:**

* Adobe Commerce (alle implementatiemethoden) 2.4.4 - 2.4.8-p2

>[!NOTE]
>
>De patch kan van toepassing worden op andere versies met nieuwe [!DNL Quality Patches Tool] versies. Om te controleren of de patch compatibel is met uw Adobe Commerce-versie, werkt u het `magento/quality-patches` -pakket bij naar de meest recente versie en controleert u de compatibiliteit op de [[!DNL Quality Patches Tool] : zoek naar patches op de pagina ](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html) . Gebruik de patch-id als een zoekwoord om de patch te zoeken.

## Probleem

De dubbele uitvoering van de vraag `cataloginventory_stock_status` komt voor wanneer het laden van een citaat op de storefront, veroorzakend overtollige vraag van DB.

<u> Stappen om </u> te reproduceren:

1. Installeer een schone instantie.
1. Maak een **[!UICONTROL Category]** en een **[!UICONTROL Simple Product]** .
1. Ga naar de categorie en voeg een product aan de kar toe.
1. Ga naar de winkelwagentje pagina: `/checkout/cart/`
1. Onderbrekingspunten instellen in [!DNL xDebug] :
   1. `app/code/Magento/CatalogInventory/Model/StockRegistryPreloader.php:115`
   1. `app/code/Magento/InventoryCatalog/Model/LegacyStockStatusCache.php:73`
   1. `lib/internal/Magento/Framework/Data/AbstractSearchResult.php:233`
   1. **Voorwaarde van het onderbrekingspunt**: `strpos($this->query->getSelectSql(true), 'stock_status') !==false`
Voeg `$_SERVER['REQUEST_URI']` aan *horloges* in [!DNL PHPStorm] toe om te verifiëren de vraag tweemaal binnen het zelfde verzoek wordt geroepen.

<u> Verwachte resultaten </u>:

De query wordt één keer per aanvraag uitgevoerd.

<u> Ware resultaten </u>:

Dezelfde query wordt tweemaal uitgevoerd:

```
SELECT `main_table`.*, `cp_table`.`sku`, `cp_table`.`type_id` FROM `cataloginventory_stock_status` AS `main_table`
 INNER JOIN `catalog_product_entity` AS `cp_table` ON main_table.product_id = cp_table.entity_id AND (cp_table.created_in <= 1 AND cp_table.updated_in > 1) WHERE (`main_table`.`product_id` IN(2)) AND (`main_table`.`website_id` = '0') 
```

## De patch toepassen

Om individuele flarden toe te passen, gebruik de volgende verbindingen afhankelijk van uw plaatsingsmethode:

* Op locatie Adobe Commerce of Magento Open Source: [[!DNL Quality Patches Tool] > Gebruik ](/help/tools/quality-patches-tool/usage.md) in de handleiding [!DNL Quality Patches Tool]
* Adobe Commerce op wolkeninfrastructuur: [ Verbeteringen en Patches > Patches toepassen ](https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/apply-patches.html) in Commerce op de gids van de Infrastructuur van de Wolk

## Gerelateerde lezing

Meer informatie over [!DNL Quality Patches Tool] vindt u in:

* [[!DNL Quality Patches Tool]: Een zelfbedieningshulpmiddel voor kwaliteitspatches ](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) in de gids van Hulpmiddelen
