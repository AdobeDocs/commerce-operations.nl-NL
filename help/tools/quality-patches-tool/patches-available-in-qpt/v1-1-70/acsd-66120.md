---
title: 'ACSD-66120: [!DNL GraphQL]  vertoningen onjuiste discontopercentages en basisprijzen wanneer catalogusprijzen belasting omvatten'
description: Pas ACSD-66120 flard toe om de kwestie van Adobe Commerce te bevestigen waar  [!DNL GraphQL]  onjuiste vertoningen disconteringspercentages en basisprijzen wanneer catalogusprijzen worden gevormd om belasting te omvatten. Dit probleem heeft geleid tot afrondingsverschillen, zoals een korting van 19,99% in plaats van de verwachte 20%.
feature: GraphQL
role: Admin, Developer
type: Troubleshooting
source-git-commit: 237ec3fb5834b4130eee1ce121dfcd2655c851de
workflow-type: tm+mt
source-wordcount: '500'
ht-degree: 0%

---


# ACSD-66120: [!DNL GraphQL] geeft onjuiste discontopercentages en basisprijzen weer wanneer catalogusprijzen belasting bevatten

De ACSD-66120-patch verhelpt het probleem waarbij [!DNL GraphQL] kortingspercentages en basisprijzen onjuist weergeeft wanneer catalogusprijzen zijn geconfigureerd om belasting op te nemen. Dit probleem heeft geleid tot afrondingsverschillen, zoals een korting van 19,99% in plaats van de verwachte 20%. Deze patch is beschikbaar wanneer [[!DNL Quality Patches Tool (QPT)]](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) 1.1.70 wordt geïnstalleerd. De patch-id is ACSD-66120. Dit probleem wordt volgens de planning opgelost in Adobe Commerce 2.4.9.

## Betrokken producten en versies

**het flard wordt gecreeerd voor de versie van Adobe Commerce:**

* Adobe Commerce (alle implementatiemethoden) 2.4.6-p9

**Compatibel met de versies van Adobe Commerce:**

* Adobe Commerce (alle implementatiemethoden) 2.4.4 - 2.4.8-p2

>[!NOTE]
>
>De patch kan van toepassing worden op andere versies met nieuwe [!DNL Quality Patches Tool] versies. Om te controleren of de patch compatibel is met uw Adobe Commerce-versie, werkt u het `magento/quality-patches` -pakket bij naar de meest recente versie en controleert u de compatibiliteit op de [[!DNL Quality Patches Tool] : zoek naar patches op de pagina &#x200B;](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html) . Gebruik de patch-id als een zoekwoord om de patch te zoeken.

## Probleem

GraphQL geeft ten onrechte kortingspercentages en basisprijzen weer wanneer catalogusprijzen zodanig zijn geconfigureerd dat deze belastingen bevatten. Vanwege afrondingsfouten wordt het disconteringspercentage weergegeven als 19,99% in plaats van de geconfigureerde 20%.

<u> Stappen om </u> te reproduceren:

1. Ga naar **[!UICONTROL Stores]** > **[!UICONTROL Settings]** > **[!UICONTROL Configuration]** > **[!UICONTROL Catalog]** > **[!UICONTROL Catalog]** > **[!UICONTROL Price]** .
1. Plaats **[!UICONTROL Catalog Price Scope]** aan *Website*.
1. Ga naar **[!UICONTROL Stores]** > **[!UICONTROL Settings]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Tax]** > **[!UICONTROL Calculation Settings]** .
   1. Plaats **[!UICONTROL Tax Calculation Method Based On]** aan *Prijs van de Eenheid*.
   1. Plaats **[!UICONTROL Catalog Prices]** aan *met inbegrip van Belasting*.
   1. Plaats **[!UICONTROL Apply Discount On Prices]** aan *met inbegrip van Belasting*.
1. Ga naar **[!UICONTROL Stores]** > **[!UICONTROL Settings]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Tax]** > **[!UICONTROL Default Tax Destination Calculation]** .
   1. Plaats **[!UICONTROL Default Country]** aan *Frankrijk*.
1. Ga naar **[!UICONTROL Stores]** > **[!UICONTROL Tax Zones and Rates]** > **[!UICONTROL Add new Tax Rate]** .
   1. Voer een naam in het veld **[!UICONTROL Tax Identifier]** in.
   1. Voer een sterretje (*) in het veld **[!UICONTROL Zip/Post Code]** in.
   1. Plaats **[!UICONTROL Country]** aan *Frankrijk*.
   1. Ga *20.000000* op het **[!UICONTROL Rate Percent]** gebied in.
   1. Klik op **[!UICONTROL Save]**.
1. Ga naar **[!UICONTROL Stores]** > **[!UICONTROL Tax Rules]** > **[!UICONTROL Add New Tax Rule]** .
   1. Voer een naam in het veld **[!UICONTROL Name]** in.
   1. Stel **[!UICONTROL Tax Rate]** in om de toegevoegde waarde in de vorige stap te beoordelen.
1. Ga naar **[!UICONTROL Catalog]** > **[!UICONTROL Products]** > **[!UICONTROL Add Product]** .
   1. Ga *test* op het **[!UICONTROL Product Name]** gebied in.
   1. Ga *test* op het **[!UICONTROL SKU]** gebied in.
   1. Ga **82.65** op het **[!UICONTROL Price]** gebied in.
   1. Plaats **[!UICONTROL Tax Class]** aan *Belastbare Goederen*.
   1. Ga *100* op het **[!UICONTROL Quantity]** gebied in.
   1. Klik op **[!UICONTROL Save]**.
1. Het werkingsgebied van de verandering in *StandaardMening van de Opslag*.
   1. Stel **[!UICONTROL Use Default Value]** in op Prijs.
   1. Plaats **[!UICONTROL Price]** aan *68.87*.
   1. Unset **[!UICONTROL Use Default Value]** bij Tax Class.
   1. Plaats **[!UICONTROL Tax Class]** aan *Belastbare goederen*. 
   1. Klik op **[!UICONTROL Save]**.
1. Ga naar **[!UICONTROL Marketing]** > *[!UICONTROL Promotions]* > **[!UICONTROL Catalog Price Rule]** > **[!UICONTROL Add New Rule]** .
   1. Voer een naam in het veld **[!UICONTROL Rule Name]** in.
   1. Plaats **[!UICONTROL Active]** aan *ja*.
   1. Plaats **[!UICONTROL Website]** aan *Belangrijkste Website*.
   1. Plaats **[!UICONTROL Customer Groups]** aan *allen*
   1. Onder **[!UICONTROL Actions]**, plaats **[!UICONTROL Apply]** aan *van toepassing is als percentage van origineel*.
   1. Ga *20.000000* op het **[!UICONTROL Discount Amount]** gebied in.
   1. Klik op **[!UICONTROL Save]**.
1. Voer een volledige redex uit:

```
$ bin/magento index:reindex
```

1. Voer de volgende [!DNL GraphQL] vraag met **[!UICONTROL Store]** uit: *gebrek* dat in de kopballen wordt geplaatst:

```
query{
products(filter: {sku: {eq: "test"}}, sort: {name: ASC}) {
    items {
      name
      sku
      price_range {
        minimum_price {
          regular_price {
            value
            currency
          }
          final_price {
            value
            currency
          }
          discount {
            amount_off
            percent_off
          }
        }
        maximum_price {
          regular_price {
            value
            currency
          }
          final_price {
            value
            currency
          }
          discount {
            amount_off
            percent_off
          }
        }
      }
    }
  }
}
  
```

<u> Verwachte resultaten </u>:

Het disconteringspercentage moet overeenkomen met de catalogusregel: 20%.

<u> Ware resultaten </u>:

Het kortingspercentage wordt onjuist weergegeven als 19,99%.

## De patch toepassen

Om individuele flarden toe te passen, gebruik de volgende verbindingen afhankelijk van uw plaatsingsmethode:

* Op locatie Adobe Commerce of Magento Open Source: [[!DNL Quality Patches Tool] > Gebruik &#x200B;](/help/tools/quality-patches-tool/usage.md) in de handleiding [!DNL Quality Patches Tool] .
* Adobe Commerce op wolkeninfrastructuur: [&#x200B; Verbeteringen en Patches > Pas Patches &#x200B;](https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/apply-patches.html) in Commerce op de gids van de Infrastructuur van de Wolk toe.

## Gerelateerde lezing

Meer informatie over [!DNL Quality Patches Tool] vindt u in:

* [[!DNL Quality Patches Tool]: Een zelfbedieningshulpmiddel voor kwaliteitspatches &#x200B;](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) in de gids van Hulpmiddelen.
